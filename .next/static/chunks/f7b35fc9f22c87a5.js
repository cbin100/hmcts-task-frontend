(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645);async function a(e,t={}){let s=await fetch(`https://hmcts-task-api.peloshop.co.uk/api${e}`,{...t,headers:{Accept:"application/json","Content-Type":"application/json",...t.headers||{}}}),n=await s.json().catch(()=>({}));return{ok:s.ok,status:s.status,json:n,data:s.ok?n:void 0}}async function n(e){let t=new URLSearchParams;e.page&&t.set("page",String(e.page)),e.status&&t.set("status",e.status);let{ok:s,status:n,json:i}=await a(`/tasks?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s)throw{status:n,json:i};return i}async function i(e){let{ok:t,status:s,json:n}=await a("/tasks",{method:"POST",body:JSON.stringify(e)});return{ok:t,status:s,json:n}}async function l(e,t){let{ok:s,status:n,json:i}=await a(`/tasks/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})});return{ok:s,status:n,json:i}}async function r(e){let{ok:t,status:s,json:n}=await a(`/tasks/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return{ok:t,status:s,json:n}}function d({onTaskCreated:e}){let[a,n]=(0,s.useState)(""),[l,r]=(0,s.useState)(""),[d,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)({}),x=async t=>{t.preventDefault(),u(!0),h({});let{ok:s,status:c,json:p}=await i({title:a,description:l,status:"pending",due_at:d});if(!s){422===c&&h(p.errors??{}),u(!1);return}n(""),r(""),o(""),u(!1),e()};return(0,t.jsxs)("form",{onSubmit:x,className:"mb-8 space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Create Task"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{required:!0,placeholder:"Title",value:a,onChange:e=>n(e.target.value),className:"border p-2 w-full rounded"}),p.title&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.title[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("textarea",{placeholder:"Description",value:l,onChange:e=>r(e.target.value),className:"border p-2 w-full rounded"}),p.description&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.description[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{required:!0,type:"datetime-local",value:d,onChange:e=>o(e.target.value),className:"border p-2 w-full rounded"}),p.due_at&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.due_at[0]})]}),(0,t.jsx)("button",{disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",children:c?"Creating...":"Create Task"})]})}function o({tasks:e,refresh:s}){let a=async(e,t)=>{await l(e,t),s()},n=async e=>{await r(e),s()};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Tasks"}),e.map(e=>{let s=new Date(e.due_at)<new Date;return(0,t.jsxs)("div",{style:{border:"1px solid #ccc",padding:"10px",marginBottom:"10px",background:s?"#ffe6e6":"#fff"},children:[(0,t.jsx)("strong",{children:e.title}),(0,t.jsx)("p",{children:e.description}),(0,t.jsxs)("p",{children:["Status: ",e.status]}),(0,t.jsxs)("p",{children:["Due: ",new Date(e.due_at).toLocaleString()]}),(0,t.jsxs)("select",{value:e.status,onChange:t=>a(e.id,t.target.value),children:[(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]}),(0,t.jsx)("button",{onClick:()=>n(e.id),style:{marginLeft:"10px"},children:"Delete"})]},e.id)})]})}function c(){let[e,a]=(0,s.useState)([]),[i,l]=(0,s.useState)(null),[r,c]=(0,s.useState)(1),[u,p]=(0,s.useState)(""),h=async(e=1,t=u)=>{let s=await n({page:e,status:t});a(s.data),l(s.meta),c(e)};return(0,s.useEffect)(()=>{h(1)},[]),(0,t.jsxs)("main",{style:{padding:"40px",maxWidth:"800px",margin:"0 auto"},children:[(0,t.jsx)("h1",{children:"HMCTS Task Manager"}),(0,t.jsx)(d,{onTaskCreated:()=>h(r)}),(0,t.jsxs)("div",{style:{margin:"20px 0"},children:[(0,t.jsx)("label",{children:"Status: "}),(0,t.jsxs)("select",{value:u,onChange:e=>{let t=e.target.value;p(t),h(1,t)},children:[(0,t.jsx)("option",{value:"",children:"All"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,t.jsx)(o,{tasks:e,refresh:()=>h(r)}),i&&(0,t.jsxs)("div",{style:{marginTop:"20px"},children:[(0,t.jsx)("button",{disabled:r<=1,onClick:()=>h(r-1),children:"Previous"}),(0,t.jsxs)("span",{style:{margin:"0 10px"},children:["Page ",i.current_page," of ",i.last_page]}),(0,t.jsx)("button",{disabled:r>=i.last_page,onClick:()=>h(r+1),children:"Next"})]})]})}e.i(47167),e.s(["default",()=>c],31713)}]);